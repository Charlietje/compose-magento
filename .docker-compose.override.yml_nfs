version: '3'

services:

  mailcatcher:
    ports:
      - 1080:1080


  nginx:
    volumes:
      - nfsmount:/phpapp


  application:
    volumes:
      - nfsmount:/phpapp
    environment:
      - "XDEBUG_CONFIG=remote_host=docker.for.mac.localhost remote_connect_back=0"


  elastic-hq:
    ports:
      - 5000:5000


  nginx_ssl:
    ports:
      - 80:80
      - 443:443


  mysql:
    ports:
      - 3307:3306


volumes:
  nfsmount:
    driver: local
    driver_opts:
      type: nfs
      o: addr=host.docker.internal,rw,nolock,hard,nointr,nfsvers=3
      device: ":BASEDIR"

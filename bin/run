#!/usr/bin/env python3

import os
import sys
from environment import Environment

currentpath = os.getcwd()
composepath = os.path.abspath(os.path.dirname(sys.argv[0]) + '/../')
os.chdir(composepath)

env = Environment(composepath + '/.env')

environ = os.environ
environ['COMPOSE_PROJECT_NAME'] = env.get_project_name()

cmd = [
    'docker-compose', '-f', env.get_compose_filename()
] + sys.argv[1:]

os.execvpe(cmd[0], cmd, environ)
